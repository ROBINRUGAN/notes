const translations = {
  en: {
    "login.userLogin": "User Login",
    "login.inputUsername": "Enter username",
    "login.inputPassword": "Enter password",
    "login.loginBtn": "Login",
    "login.noAccount": "No account yet?",
    "login.goRegister": "Register",
    "register.userRegister": "User Register",
    "register.inputUsername": "Enter username",
    "register.inputPassword": "Enter password",
    "register.registerBtn": "Register",
    "register.alreadyHaveAccount": "Already have an account?",
    "register.goLogin": "Login",
    "msg.registerSuccess": "Register success",
    "msg.userExists": "Username already exists",
    "msg.noteDecrypted": "Note decrypted!",
    "msg.pwdWrong": "Password wrong",
    "msg.noteNotEncrypted": "This note is not encrypted.",
    "msg.noteEncrypted": "This note is already encrypted.",
    "msg.pwdNotMatch": "Passwords do not match. Operation canceled",
    "msg.pwdNotEmpty": "Password cannot be empty. Operation canceled",
    "msg.noteAlreadyEncrypted": "This note is already encrypted. Please decrypt it first",
    "msg.selectNoteFirst": "Please select a note first",
    "msg.linkCopied": "Link copied",
    "msg.logoutSuccess": "Logged out",
    "msg.fillInfo": "Please fill in all information",
    "msg.wrongInfo": "Wrong username or password",
    "msg.loginSuccess": "Login success",
    "msg.loginFirst": "Please login first",
    "state.logoutBtn": "Logout",
    "state.welcome": " Welcome,",
    "state.logout": "Not logged in",
    "folder.all": "All",
    "folder.uncategorized": "Uncategorized",
    "folder.trash": "Trash",
    "title.noteCategory": "Note Categories",
    "btn.addFolder": "Add Folder",
    "btn.addNote": "Add Note",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "Search notes...",
    "text.noteCount": "0 notes",
    "btn.sort": "Sort â–¾",
    "sort.createTimeAsc": "Create Time (ASC)",
    "sort.createTimeDesc": "Create Time (DESC)",
    "sort.lastModifiedAsc": "Modified Time (ASC)",
    "sort.lastModifiedDesc": "Modified Time (DESC)",
    "sort.titleAsc": "Title (ASC)",
    "sort.titleDesc": "Title (DESC)",
    "label.createTimePrefix": "Created: ",
    "label.lastModifiedPrefix": "Last Modified: ",
    "btn.encrypt": "ðŸ”’ Encrypt",
    "btn.decrypt": "ðŸ”‘ Decrypt",
    "text.markdownEdit": "Markdown Edit",
    "text.richTextEdit": "Rich Text",
    "btn.export": "Export â–¾",
    "export.pdf": "Export PDF",
    "export.markdown": "Export Markdown",
    "export.pdfLink": "Copy PDF Link",
    "export.markdownLink": "Copy Markdown Link",
    "modal.enterPwd": "Enter Password",
    "modal.setPwd": "Set Password",
    "modal.decrypt": "Decrypt",
    "btn.confirm": "Confirm",
    "btn.cancel": "Cancel",
    "placeholder.inputPwd": "Enter password",
    "placeholder.confirmPwd": "Confirm password",

    "label.chooseTheme": "Choose Theme:",
    "option.blue": "Blue",
    "option.dark": "Dark",
    "option.yellow": "Yellow",
    "option.purple": "Purple",
    "option.green": "Green",
  },

  zh: {
    "login.userLogin": "ç”¨æˆ·ç™»å½•",
    "login.inputUsername": "è¯·è¾“å…¥ç”¨æˆ·å",
    "login.inputPassword": "è¯·è¾“å…¥å¯†ç ",
    "login.loginBtn": "ç™»å½•",
    "login.noAccount": "è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ",
    "login.goRegister": "åŽ»æ³¨å†Œ",
    "register.userRegister": "ç”¨æˆ·æ³¨å†Œ",
    "register.inputUsername": "è¯·è¾“å…¥ç”¨æˆ·å",
    "register.inputPassword": "è¯·è¾“å…¥å¯†ç ",
    "register.registerBtn": "æ³¨å†Œ",
    "register.alreadyHaveAccount": "å·²æœ‰è´¦å·ï¼Ÿ",
    "register.goLogin": "åŽ»ç™»å½•",
    "msg.registerSuccess": "æ³¨å†ŒæˆåŠŸ",
    "msg.userExists": "ç”¨æˆ·åå·²å­˜åœ¨",
    "msg.noteDecrypted": "ç¬”è®°å·²è§£å¯†ï¼",
    "msg.pwdWrong": "å¯†ç é”™è¯¯ï¼",
    "msg.noteNotEncrypted": "ç¬”è®°æœªåŠ å¯†ï¼",
    "msg.noteEncrypted": "ç¬”è®°å·²åŠ å¯†ï¼",
    "msg.pwdNotMatch": "ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´ï¼ŒåŠ å¯†æ“ä½œå–æ¶ˆ",
    "msg.pwdNotEmpty": "å¯†ç ä¸èƒ½ä¸ºç©ºï¼ŒåŠ å¯†æ“ä½œå–æ¶ˆ",
    "msg.noteAlreadyEncrypted": "å½“å‰ç¬”è®°å·²åŠ å¯†ã€‚è¯·è§£å¯†åŽå†æ“ä½œ",
    "msg.selectNoteFirst": "è¯·å…ˆé€‰ä¸­ä¸€æ¡ç¬”è®°å†è¿›è¡Œæ“ä½œ",
    "msg.linkCopied": "é“¾æŽ¥å·²ç”Ÿæˆï¼Œå·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿",
    "msg.logoutSuccess": "å·²é€€å‡ºç™»å½•",
    "msg.fillInfo": "è¯·å¡«å†™å®Œæ•´ä¿¡æ¯",
    "msg.wrongInfo": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
    "msg.loginSuccess": "ç™»å½•æˆåŠŸ",
    "msg.loginFirst": "è¯·å…ˆç™»å½•",
    "state.logoutBtn": "é€€å‡ºç™»å½•",
    "state.welcome": " æ¬¢è¿Žï¼Œ",
    "state.logout": "å°šæœªç™»å½•",
    "folder.all": "å…¨éƒ¨ç¬”è®°",
    "folder.uncategorized": "æœªåˆ†ç±»",
    "folder.trash": "å›žæ”¶ç«™",
    "title.noteCategory": "ç¬”è®°åˆ†ç±»",
    "btn.addFolder": "æ·»åŠ åˆ†ç±»",
    "btn.addNote": "æ·»åŠ ç¬”è®°",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "æœç´¢ç¬”è®°...",
    "text.noteCount": "å…±0æ¡ç¬”è®°",
    "btn.sort": "æŽ’åº â–¾",
    "sort.createTimeAsc": "æŒ‰åˆ›å»ºæ—¶é—´ (æ­£åº)",
    "sort.createTimeDesc": "æŒ‰åˆ›å»ºæ—¶é—´ (å€’åº)",
    "sort.lastModifiedAsc": "æŒ‰ä¿®æ”¹æ—¶é—´ (æ­£åº)",
    "sort.lastModifiedDesc": "æŒ‰ä¿®æ”¹æ—¶é—´ (å€’åº)",
    "sort.titleAsc": "æŒ‰æ ‡é¢˜ (æ­£åº)",
    "sort.titleDesc": "æŒ‰æ ‡é¢˜ (å€’åº)",
    "label.createTimePrefix": "åˆ›å»ºæ—¶é—´ï¼š",
    "label.lastModifiedPrefix": "æœ€åŽä¿®æ”¹ï¼š",
    "btn.encrypt": "ðŸ”’ åŠ å¯†",
    "btn.decrypt": "ðŸ”‘ è§£å¯†",
    "text.markdownEdit": "Markdownç¼–è¾‘",
    "text.richTextEdit": "å¯Œæ–‡æœ¬ç¼–è¾‘",
    "btn.export": "å¯¼å‡º â–¾",
    "export.pdf": "å¯¼å‡ºPDF",
    "export.markdown": "å¯¼å‡ºMarkdown",
    "export.pdfLink": "å¤åˆ¶PDFé“¾æŽ¥",
    "export.markdownLink": "å¤åˆ¶Markdowné“¾æŽ¥",
    "modal.enterPwd": "è¯·è¾“å…¥ç¬”è®°å¯†ç ",
    "modal.setPwd": "è®¾ç½®å¯†ç ",
    "modal.decrypt": "è§£å¯†æ“ä½œ",
    "btn.confirm": "ç¡®è®¤",
    "btn.cancel": "å–æ¶ˆ",
    "placeholder.inputPwd": "è¯·è¾“å…¥å¯†ç ",
    "placeholder.confirmPwd": "è¯·å†æ¬¡è¾“å…¥å¯†ç ",

    "label.chooseTheme": "é€‰æ‹©ä¸»é¢˜:",
    "option.blue": "æ¸…æ–°è“",
    "option.dark": "æš—é»‘æ¨¡å¼",
    "option.yellow": "æ˜Žåªšé»„",
    "option.purple": "æµªæ¼«ç´«",
    "option.green": "æ¸…çˆ½ç»¿",
  },

  // ===== æ—¥è¯­ï¼ˆjaï¼‰ =====
  ja: {
    "login.userLogin": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³",
    "login.inputUsername": "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›",
    "login.inputPassword": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›",
    "login.loginBtn": "ãƒ­ã‚°ã‚¤ãƒ³",
    "login.noAccount": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„ã§ã™ã‹ï¼Ÿ",
    "login.goRegister": "ç™»éŒ²",
    "register.userRegister": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²",
    "register.inputUsername": "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›",
    "register.inputPassword": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›",
    "register.registerBtn": "ç™»éŒ²",
    "register.alreadyHaveAccount": "ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ",
    "register.goLogin": "ãƒ­ã‚°ã‚¤ãƒ³",
    "msg.registerSuccess": "ç™»éŒ²æˆåŠŸ",
    "msg.userExists": "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯ã™ã§ã«å­˜åœ¨ã—ã¾ã™",
    "msg.noteDecrypted": "ãƒŽãƒ¼ãƒˆãŒå¾©å·åŒ–ã•ã‚Œã¾ã—ãŸï¼",
    "msg.pwdWrong": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™",
    "msg.noteNotEncrypted": "ã“ã®ãƒŽãƒ¼ãƒˆã¯ã™ã§ã«æš—å·åŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚",
    "msg.noteEncrypted": "ã“ã®ãƒŽãƒ¼ãƒˆã¯ã™ã§ã«",
    "msg.pwdNotMatch": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚æ“ä½œã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ",
    "msg.pwdNotEmpty": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    "msg.noteAlreadyEncrypted": "ã“ã®ãƒŽãƒ¼ãƒˆã¯ã™ã§ã«æš—å·åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚æ“ä½œã‚’è¡Œã†å‰ã«å¾©å·åŒ–ã—ã¦ãã ã•ã„",
    "msg.selectNoteFirst": "ãƒŽãƒ¼ãƒˆã‚’é¸æŠžã—ã¦ãã ã•ã„",
    "msg.linkCopied": "ãƒªãƒ³ã‚¯ãŒç”Ÿæˆã•ã‚Œã€ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸ",
    "msg.logoutSuccess": "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ",
    "msg.fillInfo": "ã™ã¹ã¦ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    "msg.wrongInfo": "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™",
    "msg.loginSuccess": "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ",
    "msg.loginFirst": "ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„",
    "state.logoutBtn": "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
    "state.welcome": " ã‚ˆã†ã“ãã€",
    "state.logout": "ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“",
    "folder.all": "ã™ã¹ã¦ã®ãƒŽãƒ¼ãƒˆ",
    "folder.uncategorized": "æœªåˆ†é¡ž",
    "folder.trash": "ã‚´ãƒŸç®±",
    "title.noteCategory": "ãƒŽãƒ¼ãƒˆã‚«ãƒ†ã‚´ãƒª",
    "btn.addFolder": "ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’è¿½åŠ ",
    "btn.addNote": "ãƒŽãƒ¼ãƒˆã‚’è¿½åŠ ",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "ãƒŽãƒ¼ãƒˆã‚’æ¤œç´¢...",
    "text.noteCount": "0 ä»¶ã®ãƒŽãƒ¼ãƒˆ",
    "btn.sort": "ä¸¦ã³æ›¿ãˆ â–¾",
    "sort.createTimeAsc": "ä½œæˆæ—¥ (æ˜‡é †)",
    "sort.createTimeDesc": "ä½œæˆæ—¥ (é™é †)",
    "sort.lastModifiedAsc": "æ›´æ–°æ—¥ (æ˜‡é †)",
    "sort.lastModifiedDesc": "æ›´æ–°æ—¥ (é™é †)",
    "sort.titleAsc": "ã‚¿ã‚¤ãƒˆãƒ« (æ˜‡é †)",
    "sort.titleDesc": "ã‚¿ã‚¤ãƒˆãƒ« (é™é †)",
    "label.createTimePrefix": "ä½œæˆæ—¥æ™‚ï¼š",
    "label.lastModifiedPrefix": "æœ€çµ‚æ›´æ–°ï¼š",
    "btn.encrypt": "ðŸ”’ æš—å·åŒ–",
    "btn.decrypt": "ðŸ”‘ å¾©å·",
    "text.markdownEdit": "Markdownç·¨é›†",
    "text.richTextEdit": "ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆ",
    "btn.export": "ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ â–¾",
    "export.pdf": "PDFã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
    "export.markdown": "Markdownã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
    "export.pdfLink": "PDFãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼",
    "export.markdownLink": "Markdownãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼",
    "modal.enterPwd": "ãƒŽãƒ¼ãƒˆã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    "modal.setPwd": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š",
    "modal.decrypt": "ãƒŽãƒ¼ãƒˆã®å¾©å·",
    "btn.confirm": "ç¢ºèª",
    "btn.cancel": "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
    "placeholder.inputPwd": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›",
    "placeholder.confirmPwd": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†å…¥åŠ›",

    "label.chooseTheme": "ãƒ†ãƒ¼ãƒžã‚’é¸æŠžï¼š",
    "option.blue": "ãƒ–ãƒ«ãƒ¼",
    "option.dark": "ãƒ€ãƒ¼ã‚¯",
    "option.yellow": "ã‚¤ã‚¨ãƒ­ãƒ¼",
    "option.purple": "ãƒ‘ãƒ¼ãƒ—ãƒ«",
    "option.green": "ã‚°ãƒªãƒ¼ãƒ³",
  },

  // ===== æ³•è¯­ï¼ˆfrï¼‰ =====
  fr: {
    "login.userLogin": "Connexion utilisateur",
    "login.inputUsername": "Entrez votre nom d'utilisateur",
    "login.inputPassword": "Entrez votre mot de passe",
    "login.loginBtn": "Connexion",
    "login.noAccount": "Pas encore de compte ?",
    "login.goRegister": "S'inscrire",
    "register.userRegister": "Inscription utilisateur",
    "register.inputUsername": "Entrez votre nom d'utilisateur",
    "register.inputPassword": "Entrez votre mot de passe",
    "register.registerBtn": "S'inscrire",
    "register.alreadyHaveAccount": "DÃ©jÃ  un compte ?",
    "register.goLogin": "Se connecter ",
    "msg.registerSuccess": "Inscription rÃ©ussie",
    "msg.userExists": "Nom d'utilisateur dÃ©jÃ  existant",
    "msg.noteDecrypted": "Note dÃ©chiffrÃ©e!",
    "msg.pwdWrong": "Mot de passe incorrect",
    "msg.noteNotEncrypted": "Cette note n'est pas chiffrÃ©e.",
    "msg.noteEncrypted": "Cette note est dÃ©jÃ  chiffrÃ©e.",
    "msg.pwdNotMatch": "Les mots de passe ne correspondent pas. OpÃ©ration annulÃ©e",
    "msg.pwdNotEmpty": "Le mot de passe ne peut pas Ãªtre vide. OpÃ©ration annulÃ©e",
    "msg.noteAlreadyEncrypted": "Cette note est dÃ©jÃ  chiffrÃ©e. Veuillez la dÃ©chiffrer d'abord",
    "msg.selectNoteFirst": "Veuillez d'abord sÃ©lectionner une note",
    "msg.linkCopied": "Lien copiÃ©",
    "msg.logoutSuccess": "DÃ©connectÃ©",
    "msg.fillInfo": "Veuillez remplir toutes les informations",
    "msg.wrongInfo": "Nom d'utilisateur ou mot de passe incorrect",
    "msg.loginSuccess": "Connexion rÃ©ussie",
    "msg.loginFirst": "Veuillez vous connecter d'abord",
    "state.logoutBtn": "DÃ©connexion",
    "state.welcome": " Bienvenue,",
    "state.logout": "DÃ©connectÃ©",
    "folder.all": "Toutes les notes",
    "folder.uncategorized": "Non classÃ©",
    "folder.trash": "Corbeille",
    "title.noteCategory": "CatÃ©gories de notes",
    "btn.addFolder": "Ajouter un dossier",
    "btn.addNote": "Ajouter une note",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "Rechercher des notes...",
    "text.noteCount": "0 notes",
    "btn.sort": "Trier â–¾",
    "sort.createTimeAsc": "Date de crÃ©ation (ASC)",
    "sort.createTimeDesc": "Date de crÃ©ation (DESC)",
    "sort.lastModifiedAsc": "Date de modification (ASC)",
    "sort.lastModifiedDesc": "Date de modification (DESC)",
    "sort.titleAsc": "Titre (ASC)",
    "sort.titleDesc": "Titre (DESC)",
    "label.createTimePrefix": "CrÃ©Ã© : ",
    "label.lastModifiedPrefix": "DerniÃ¨re modification : ",
    "btn.encrypt": "ðŸ”’ Chiffrer",
    "btn.decrypt": "ðŸ”‘ DÃ©chiffrer",
    "text.markdownEdit": "Ã‰dition Markdown",
    "text.richTextEdit": "Ã‰dition Rich Text",
    "btn.export": "Exporter â–¾",
    "export.pdf": "Exporter PDF",
    "export.markdown": "Exporter Markdown",
    "export.pdfLink": "Copier le lien PDF",
    "export.markdownLink": "Copier le lien Markdown",
    "modal.enterPwd": "Entrez le mot de passe",
    "modal.setPwd": "DÃ©finir le mot de passe",
    "modal.decrypt": "DÃ©chiffrer",
    "btn.confirm": "Confirmer",
    "btn.cancel": "Annuler",
    "placeholder.inputPwd": "Entrez le mot de passe",
    "placeholder.confirmPwd": "Confirmez le mot de passe",

    "label.chooseTheme": "Choisir le thÃ¨me :",
    "option.blue": "Bleu",
    "option.dark": "Sombre",
    "option.yellow": "Jaune",
    "option.purple": "Violet",
    "option.green": "Vert",
  },
};

function applyLanguage(lang) {
  const notesLength = document.querySelectorAll(".note-item").length;
  console.log("notesLength", notesLength);
  const langPack = translations[lang] || translations["zh"];

  document.querySelectorAll("[data-i18n-key]").forEach((el) => {
    const key = el.getAttribute("data-i18n-key");
    if (langPack[key]) {
      el.textContent = langPack[key];
    }
  });

  document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
    const key = el.getAttribute("data-i18n-placeholder");
    if (langPack[key]) {
      el.placeholder = langPack[key];
    }
  });

  const noteCountEl = document.querySelector(".note-count");
  if (noteCountEl) {
    const countText = noteCountEl.textContent;
    const newCountText = countText.replace(/\d+/, notesLength);
    noteCountEl.textContent = newCountText;
  }
}

document.addEventListener("DOMContentLoaded", () => {
  const langSelect = document.getElementById("lang-select");

  let savedLang = localStorage.getItem("userLanguage") || navigator.language.split("-")[0];
  applyLanguage(savedLang);
  // åŒæ­¥ä¸‹æ‹‰æ¡†
  if (langSelect) langSelect.value = savedLang;

  // ç”¨æˆ·åˆ‡æ¢è¯­è¨€
  if (langSelect) {
    langSelect.addEventListener("change", (e) => {
      const newLang = e.target.value; // "en" / "zh" / "ja" / "fr" ...
      applyLanguage(newLang);
      localStorage.setItem("userLanguage", newLang);
    });
  }
});
