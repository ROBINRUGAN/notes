const translations = {
  en: {
    "title.noteCategory": "Note Categories",
    "btn.addFolder": "Add Folder",
    "btn.addNote": "Add Note",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "Search notes...",
    "text.noteCount": "0 notes",
    "btn.sort": "Sort ▾",
    "sort.createTimeAsc": "Create Time (ASC)",
    "sort.createTimeDesc": "Create Time (DESC)",
    "sort.lastModifiedAsc": "Modified Time (ASC)",
    "sort.lastModifiedDesc": "Modified Time (DESC)",
    "sort.titleAsc": "Title (ASC)",
    "sort.titleDesc": "Title (DESC)",
    "label.createTimePrefix": "Created: ",
    "label.lastModifiedPrefix": "Last Modified: ",
    "btn.encrypt": "🔒 Encrypt",
    "btn.decrypt": "🔑 Decrypt",
    "text.markdownEdit": "Markdown Edit",
    "text.richTextEdit": "Rich Text",
    "btn.export": "Export ▾",
    "export.pdf": "Export PDF",
    "export.markdown": "Export Markdown",
    "modal.enterPwd": "Enter Password",
    "modal.setPwd": "Set Password",
    "modal.decrypt": "Decrypt",
    "btn.confirm": "Confirm",
    "btn.cancel": "Cancel",
    "placeholder.inputPwd": "Enter password",
    "placeholder.confirmPwd": "Confirm password",

    "label.chooseTheme": "Choose Theme:",
    "option.blue": "Blue",
    "option.dark": "Dark",
    "option.yellow": "Yellow",
    "option.purple": "Purple",
    "option.green": "Green",
  },

  zh: {
    "title.noteCategory": "笔记分类",
    "btn.addFolder": "添加分类",
    "btn.addNote": "添加笔记",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "搜索笔记...",
    "text.noteCount": "共0条笔记",
    "btn.sort": "排序 ▾",
    "sort.createTimeAsc": "按创建时间 (正序)",
    "sort.createTimeDesc": "按创建时间 (倒序)",
    "sort.lastModifiedAsc": "按修改时间 (正序)",
    "sort.lastModifiedDesc": "按修改时间 (倒序)",
    "sort.titleAsc": "按标题 (正序)",
    "sort.titleDesc": "按标题 (倒序)",
    "label.createTimePrefix": "创建时间：",
    "label.lastModifiedPrefix": "最后修改：",
    "btn.encrypt": "🔒 加密",
    "btn.decrypt": "🔑 解密",
    "text.markdownEdit": "Markdown编辑",
    "text.richTextEdit": "富文本编辑",
    "btn.export": "导出 ▾",
    "export.pdf": "导出 PDF",
    "export.markdown": "导出 Markdown",
    "modal.enterPwd": "请输入笔记密码",
    "modal.setPwd": "设置密码",
    "modal.decrypt": "解密操作",
    "btn.confirm": "确认",
    "btn.cancel": "取消",
    "placeholder.inputPwd": "请输入密码",
    "placeholder.confirmPwd": "请再次输入密码",

    "label.chooseTheme": "选择主题:",
    "option.blue": "清新蓝",
    "option.dark": "暗黑模式",
    "option.yellow": "明媚黄",
    "option.purple": "浪漫紫",
    "option.green": "清爽绿",
  },

  // ===== 日语（ja） =====
  ja: {
    "title.noteCategory": "ノートカテゴリ",
    "btn.addFolder": "フォルダーを追加",
    "btn.addNote": "ノートを追加",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "ノートを検索...",
    "text.noteCount": "0 件のノート",
    "btn.sort": "並び替え ▾",
    "sort.createTimeAsc": "作成日 (昇順)",
    "sort.createTimeDesc": "作成日 (降順)",
    "sort.lastModifiedAsc": "更新日 (昇順)",
    "sort.lastModifiedDesc": "更新日 (降順)",
    "sort.titleAsc": "タイトル (昇順)",
    "sort.titleDesc": "タイトル (降順)",
    "label.createTimePrefix": "作成日時：",
    "label.lastModifiedPrefix": "最終更新：",
    "btn.encrypt": "🔒 暗号化",
    "btn.decrypt": "🔑 復号",
    "text.markdownEdit": "Markdown編集",
    "text.richTextEdit": "リッチテキスト",
    "btn.export": "エクスポート ▾",
    "export.pdf": "PDFとしてエクスポート",
    "export.markdown": "Markdownとしてエクスポート",
    "modal.enterPwd": "ノートのパスワードを入力してください",
    "modal.setPwd": "パスワードを設定",
    "modal.decrypt": "ノートの復号",
    "btn.confirm": "確認",
    "btn.cancel": "キャンセル",
    "placeholder.inputPwd": "パスワードを入力",
    "placeholder.confirmPwd": "パスワードを再入力",

    "label.chooseTheme": "テーマを選択：",
    "option.blue": "ブルー",
    "option.dark": "ダーク",
    "option.yellow": "イエロー",
    "option.purple": "パープル",
    "option.green": "グリーン",
  },

  // ===== 法语（fr） =====
  fr: {
    "title.noteCategory": "Catégories de notes",
    "btn.addFolder": "Ajouter un dossier",
    "btn.addNote": "Ajouter une note",
    "btn.addNoteSymbol": "+",
    "placeholder.search": "Rechercher des notes...",
    "text.noteCount": "0 notes",
    "btn.sort": "Trier ▾",
    "sort.createTimeAsc": "Date de création (ASC)",
    "sort.createTimeDesc": "Date de création (DESC)",
    "sort.lastModifiedAsc": "Date de modification (ASC)",
    "sort.lastModifiedDesc": "Date de modification (DESC)",
    "sort.titleAsc": "Titre (ASC)",
    "sort.titleDesc": "Titre (DESC)",
    "label.createTimePrefix": "Créé : ",
    "label.lastModifiedPrefix": "Dernière modification : ",
    "btn.encrypt": "🔒 Chiffrer",
    "btn.decrypt": "🔑 Déchiffrer",
    "text.markdownEdit": "Édition Markdown",
    "text.richTextEdit": "Édition Rich Text",
    "btn.export": "Exporter ▾",
    "export.pdf": "Exporter PDF",
    "export.markdown": "Exporter Markdown",
    "modal.enterPwd": "Entrez le mot de passe",
    "modal.setPwd": "Définir le mot de passe",
    "modal.decrypt": "Déchiffrer",
    "btn.confirm": "Confirmer",
    "btn.cancel": "Annuler",
    "placeholder.inputPwd": "Entrez le mot de passe",
    "placeholder.confirmPwd": "Confirmez le mot de passe",

    "label.chooseTheme": "Choisir le thème :",
    "option.blue": "Bleu",
    "option.dark": "Sombre",
    "option.yellow": "Jaune",
    "option.purple": "Violet",
    "option.green": "Vert",
  },
};

function applyLanguage(lang) {
  const langPack = translations[lang] || translations["zh"];

  document.querySelectorAll("[data-i18n-key]").forEach((el) => {
    const key = el.getAttribute("data-i18n-key");
    if (langPack[key]) {
      el.textContent = langPack[key];
    }
  });

  document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
    const key = el.getAttribute("data-i18n-placeholder");
    if (langPack[key]) {
      el.placeholder = langPack[key];
    }
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const langSelect = document.getElementById("lang-select");

  // 从 localStorage 拿之前记录的语言
  let savedLang = localStorage.getItem("userLanguage") || "zh";
  applyLanguage(savedLang);
  // 同步下拉框
  if (langSelect) langSelect.value = savedLang;

  // 用户切换语言
  if (langSelect) {
    langSelect.addEventListener("change", (e) => {
      const newLang = e.target.value; // "en" / "zh" / "ja" / "fr" ...
      applyLanguage(newLang);
      localStorage.setItem("userLanguage", newLang);
    });
  }
});
